<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:components="clr-namespace:MoneyMate.Components"
             xmlns:viewmodels="clr-namespace:MoneyMate.ViewModels"
             xmlns:sys="clr-namespace:System;assembly=netstandard"
             x:Class="MoneyMate.Views.EditBudgetPage"
             x:Name="PageRoot">

    <!-- ViewModel -->
    <ContentPage.BindingContext>
        <viewmodels:BudgetViewModel />
    </ContentPage.BindingContext>

    <!-- STRUCTURE GLOBALE -->
    <Grid RowDefinitions="Auto,*,Auto"
          BackgroundColor="{StaticResource BackgroundLight}">

        <!-- â­ HEADER -->
        <components:HeaderAuthenticated Grid.Row="0" />

        <!-- â­ CONTENU -->
        <ScrollView Grid.Row="1" Padding="0,0,0,40">
            <VerticalStackLayout Style="{StaticResource MainContainer}"
                                 Spacing="20"
                                 Margin="0,0,0,80">

                <!-- ðŸ·ï¸ TITRE -->
                <Label Text="Modifier le budget"
                       FontSize="24"
                       FontAttributes="Bold"
                       TextColor="{StaticResource Primary}" />

                <!-- ðŸ’¶ Montant total -->
                <Label Text="Montant total (â‚¬)" Style="{StaticResource FormLabel}" />
                <Border Style="{StaticResource InputBorder}">
                    <Entry Placeholder="Ex : 2000"
                           Keyboard="Numeric"
                           Text="{Binding TotalAmount}"
                           Style="{StaticResource EntryForm}" />
                </Border>

                <!-- ðŸ—“ï¸ Mois/AnnÃ©e -->
                <Label Text="Mois du budget" Style="{StaticResource FormLabel}" />
                <Border Style="{StaticResource InputBorder}">
                    <DatePicker Date="{Binding SelectedDate, Mode=TwoWay}"
                                MaximumDate="{x:Static sys:DateTime.Now}"
                                Format="MM/yyyy" />
                </Border>

                <!-- MESSAGE -->
                <Label Text="{Binding Message}"
                       TextColor="{Binding MessageColor}"
                       FontAttributes="Bold"
                       HorizontalOptions="Center" />

                <!-- â­ BOUTONS -->
                <VerticalStackLayout Spacing="10">

                    <Button Text="Valider les modifications"
                            Style="{StaticResource PrimaryButton}"
                            Command="{Binding UpdateBudgetCommand}" />

                    <Button Text="Supprimer le budget"
                            BackgroundColor="{StaticResource Danger}"
                            Style="{StaticResource PrimaryButton}"
                            Command="{Binding DeleteBudgetCommand}" />

                    <Button Text="Annuler"
                            Style="{StaticResource OutlineButton}"
                            Command="{Binding CancelCommand}" />

                </VerticalStackLayout>

            </VerticalStackLayout>
        </ScrollView>

        <!-- â­ NAVBAR -->
        <components:Navbar Grid.Row="2" />

    </Grid>
</ContentPage>
